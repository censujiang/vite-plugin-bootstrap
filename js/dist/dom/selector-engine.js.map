{"version":3,"file":"selector-engine.js","sources":["../../src/dom/selector-engine.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.1): dom/selector-engine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isDisabled, isVisible } from '../util/index'\n\n/**\n * Constants\n */\nif (!import.meta.env.SSR) {\n  var SelectorEngineC = {\n    find(selector, element = document.documentElement) {\n      return [].concat(...Element.prototype.querySelectorAll.call(element, selector))\n    },\n\n    findOne(selector, element = document.documentElement) {\n      return Element.prototype.querySelector.call(element, selector)\n    },\n\n    children(element, selector) {\n      return [].concat(...element.children).filter(child => child.matches(selector))\n    },\n\n    parents(element, selector) {\n      const parents = []\n      let ancestor = element.parentNode.closest(selector)\n\n      while (ancestor) {\n        parents.push(ancestor)\n        ancestor = ancestor.parentNode.closest(selector)\n      }\n\n      return parents\n    },\n\n    prev(element, selector) {\n      let previous = element.previousElementSibling\n\n      while (previous) {\n        if (previous.matches(selector)) {\n          return [previous]\n        }\n\n        previous = previous.previousElementSibling\n      }\n\n      return []\n    },\n    // TODO: this is now unused; remove later along with prev()\n    next(element, selector) {\n      let next = element.nextElementSibling\n\n      while (next) {\n        if (next.matches(selector)) {\n          return [next]\n        }\n\n        next = next.nextElementSibling\n      }\n\n      return []\n    },\n\n    focusableChildren(element) {\n      const focusables = [\n        'a',\n        'button',\n        'input',\n        'textarea',\n        'select',\n        'details',\n        '[tabindex]',\n        '[contenteditable=\"true\"]'\n      ].map(selector => `${selector}:not([tabindex^=\"-\"])`).join(',')\n\n      return this.find(focusables, element).filter(el => !isDisabled(el) && isVisible(el))\n    }\n  }\n}\nconst SelectorEngine = SelectorEngineC;\nexport default SelectorEngine\n"],"names":["import","SSR","SelectorEngineC","find","selector","element","document","documentElement","concat","Element","prototype","querySelectorAll","call","findOne","querySelector","children","filter","child","matches","parents","ancestor","parentNode","closest","push","prev","previous","previousElementSibling","next","nextElementSibling","focusableChildren","focusables","map","join","el","isDisabled","isVisible","SelectorEngine"],"mappings":"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"}